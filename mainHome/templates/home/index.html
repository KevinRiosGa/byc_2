{% load static %}
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Inicio{% endblock %}</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="index.css">
    <link rel="stylesheet" href="{% static 'css/index.css' %}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css" integrity="sha512-Evv84Mr4kqVGRNSgIGL/F/aIDqQb7xQ2vcrdIwxfjThSH8CSR7PBEakCr51Ck+w+/U6swU2Im1vVX0SVk9ABhg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
</head>
<body>
    <!-- Boton de carga -->
    <div id="loading">
        <div class="spinner"></div>
    </div>

    <!-- Botón Offcanvas (Icono hamburguesa) -->
    <button class="btn d-md-none m-4" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasSidebar" id="btnOffcanvas">
        <span class="navbar-toggler-icon"><i class="fa-solid fa-bars"></i></span>
    </button>

    <div class="d-flex main-navegation">
        <!-- Sidebar -->
        <div id="sidebar" class="p-3 d-none d-md-block">
            <div>
                <div class="container-fluid">
                    <img src="{% static 'img/logoGruas.png' %}" alt="logo" class="img-fluid mb-5 mt-3">
                </div>
                <ul class="nav flex-column">
                    <!-- Enlace de Inicio -->
                    <li class="nav-item">
                        <a class="btn w-100 text-start text-dark d-flex align-items-center gap-2" href="{% url 'home' %}">
                            <i class="bi bi-house-fill"></i> Inicio
                        </a>
                    </li>
    
                    <!-- Menú Recursos Humanos -->
                    <li class="nav-item">
                        <button class="btn w-100 text-start text-dark d-flex align-items-center gap-2" 
                            data-bs-toggle="collapse" 
                            data-bs-target="#sidebarRecursosHumanos" 
                            aria-expanded="false" 
                            aria-controls="sidebarRecursosHumanos">
                            <i class="bi bi-people-fill"></i> Recursos Humanos
                            <i class="bi bi-chevron-down ms-auto"></i>
                        </button>
                        <div id="sidebarRecursosHumanos" class="collapse ps-4" data-bs-parent="#sidebar">
                            <a class="nav-link text-dark" href="{% url 'table_personal' %}">Tabla de Personal</a>
                            <a class="nav-link text-dark" href="#">Ausentismos</a>
                            <a class="nav-link text-dark" href="#">Informes</a>
                        </div>
                    </li>
    
                    <!-- Menú Maquinarias -->
                    <li class="nav-item">
                        <button class="btn w-100 text-start text-dark d-flex align-items-center gap-2" data-bs-toggle="collapse" data-bs-target="#sidebarMaquinarias" aria-expanded="false">
                            <i class="bi bi-tools"></i> Maquinarias
                            <i class="bi bi-chevron-down ms-auto"></i>
                        </button>
                        <div id="sidebarMaquinarias" class="collapse ps-4">
                            <a class="nav-link text-dark" href="#">Tabla de Vehículos</a>
                            <a class="nav-link text-dark" href="#">Tareas</a>
                            <a class="nav-link text-dark" href="#">Informes</a>
                            <button class="btn w-100 text-start text-dark d-flex align-items-center gap-2" data-bs-toggle="collapse" data-bs-target="#sidebarSettings_1" aria-expanded="false">
                                <i class="bi bi-sliders2"></i> Configuraciones
                                <i class="bi bi-chevron-down ms-auto"></i>
                            </button>
                        </div>
                        <div id="sidebarSettings_1" class="collapse ps-4">
                            <a class="nav-link text-dark" href="{% url 'tipoequipo_list' %}">Tipos de equipos</a>
                            <a class="nav-link text-dark" href="{% url 'marcaequipo_list' %}">Marcas</a>
                            <a class="nav-link text-dark" href="#">Modelos</a>
                            <a class="nav-link text-dark" href="#">Secciones</a>
                            <a class="nav-link text-dark" href="#">Reparaciones</a>
                        </div>

                        
                    </li>
    
                    <!-- Menú Planificaciones -->
                    <li class="nav-item">
                        <button class="btn w-100 text-start text-dark d-flex align-items-center gap-2" data-bs-toggle="collapse" data-bs-target="#sidebarPlanificaciones" aria-expanded="false">
                            <i class="bi bi-clipboard-check"></i> Planificaciones
                            <i class="bi bi-chevron-down ms-auto"></i>
                        </button>
                        <div id="sidebarPlanificaciones" class="collapse ps-4">
                            <a class="nav-link text-dark" href="#">Gestión de planificación</a>
                            <a class="nav-link text-dark" href="#">Tareas</a>
                            <a class="nav-link text-dark" href="#">Informes</a>
                        </div>
                    </li>
                </ul>
            </div>
        </div>
    
        <!-- Contenido Principal -->
        <div class="w-100">
            <nav class="navbar navbar-expand-lg bg-light d-none d-md-flex" id="navbar-top-lg">
                <div class="container-fluid">
                    <div class="d-flex justify-content-end w-100">
                        <span class="navbar-text me-2 fs-5 fst-italic">Usuario | Cargo</span>
                        <div class="d-flex align-items-center flex-column flex-md-row">
                            <!-- Botón de configuración -->
                            <a class="btn me-1 d-flex justify-content-center align-items-center">
                                <i class="fa-solid fa-gear fs-5"></i>
                            </a>
                            <!-- Botón de salir -->
                            <form method="POST" action="{% url 'logout' %}">
                                {% csrf_token %}
                                <button class="btn fs-5 d-flex justify-content-center align-items-center" type="submit">
                                    <i class="fa-solid fa-right-from-bracket fs-5"></i>
                                </button>
                            </form>
                        </div>
                    </div>
                </div>
            </nav>
    
            <div class="container-fluid p-4 main-content">
                <div class="card-container">
                    {% block content %}

                    {% endblock %}
                </div>
            </div>
        </div>
    </div>

    <!-- Offcanvas para móviles -->
    <div class="offcanvas offcanvas-start" id="offcanvasSidebar">
        <div class="d-flex">
            <div class="offcanvas-header w-100 ms-3 me-3 mt-4">
                <img src="{% static 'img/logoGruas.png' %}"  alt="logo" class="img-fluid">
            </div>
            <!--
            <div class="offcanvas-header justify-content-end">
                <button type="button" class="btn-close btn-close-dark" data-bs-dismiss="offcanvas"></button>
            </div>
            -->
        </div>
        <div class="offcanvas-body d-flex flex-column justify-content-between">
            <div class="m-3 d-flex flex-column justify-content-evenly" id="datosUsuario">
                <div class="d-flex justify-content-center" id="nombreUsuario">
                    <span class="navbar-text fs-5 fst-italic">Guillermo Diaz</span>
                </div>
                <div class="d-flex justify-content-center" id="rolUsuario">
                    <span class="navbar-text fs-5 fst-italic">Planificador</span>
                </div>
            </div>
            <ul class="nav flex-column">
                <!-- Inicio -->
            <li class="nav-item fs-6">
                <a class="btn nav-link active d-flex align-items-center gap-2" href="{% url 'home' %}"><i class="bi bi-house-fill"></i> Inicio</a>
            </li>

            <!-- Recursos Humanos con Acordeón -->
            <li class="nav-item fs-6">
                <button class="btn nav-link w-100 text-start d-flex align-items-center gap-2" data-bs-toggle="collapse" data-bs-target="#offRecursosHumanos" aria-expanded="false">
                    <i class="bi bi-people-fill"></i> Recursos Humanos
                    <i class="bi bi-chevron-down ms-auto"></i>
                </button>
                <div id="offRecursosHumanos" class="collapse ps-4">
                    <a class="nav-link" href="{% url 'table_personal' %}">Tabla de Personal</a>
                    <a class="nav-link" href="#">Ausentismos</a>
                    <a class="nav-link" href="#">Informes</a>
                </div>
            </li>

            <!-- Maquinarias con Acordeón -->
            <li class="nav-item fs-6">
                <button class="btn nav-link w-100 text-start d-flex align-items-center gap-2" data-bs-toggle="collapse" data-bs-target="#offMaquinarias" aria-expanded="false">
                    <i class="bi bi-tools"></i> Maquinarias
                    <i class="bi bi-chevron-down ms-auto"></i>
                </button>
                <div id="offMaquinarias" class="collapse ps-4">
                    <a class="nav-link" href="#">Tabla de Vehículos</a>
                    <a class="nav-link" href="#">Tareas</a>
                    <a class="nav-link" href="#">Informes</a>
                </div>
            </li>

            <!-- Planificaciones con Acordeón -->
            <li class="nav-item fs-6">
                <button class="btn nav-link w-100 text-start d-flex align-items-center gap-2" data-bs-toggle="collapse" data-bs-target="#offPlanificaciones" aria-expanded="false">
                    <i class="bi bi-clipboard-check"></i> Planificaciones
                    <i class="bi bi-chevron-down ms-auto"></i>
                </button>
                <div id="offPlanificaciones" class="collapse ps-4">
                    <a class="nav-link" href="#">Gestión de planificación</a>
                    <a class="nav-link" href="#">Tareas</a>
                    <a class="nav-link" href="#">Informes</a>
                </div>
            </li>
            </ul>
            <div class="mt-auto d-flex flex-column gap-2">
                <button class="btn w-100 d-flex align-items-center gap-2 ">
                    <i class="fa-solid fa-gear"></i>
                    <span>Configuración</span>
                </button>
                
                <form method="POST" action="{% url 'logout' %}">
                    {% csrf_token %}
                    <button class="btn w-100 d-flex align-items-center gap-2" type="submit">
                        <i class="fa-solid fa-right-from-bracket"></i></i>
                        <span>Salir</span>
                    </button>
                </form>
            </div>
        </div>
    </div>
    <script src="{% static 'js/index.js' %}" ></script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
   
</body>
</html>
